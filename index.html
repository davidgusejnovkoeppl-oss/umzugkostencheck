<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>umzugkostencheck.de ‚Äì Umzugskosten vergleichen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --blue-50:#eff6ff;
      --blue-100:#dbeafe;
      --blue-400:#60a5fa;
      --blue-500:#3b82f6;
      --blue-600:#2563eb;
      --blue-700:#1d4ed8;
      --gray-50:#f9fafb;
      --gray-100:#f3f4f6;
      --gray-200:#e5e7eb;
      --gray-300:#d1d5db;
      --gray-400:#9ca3af;
      --gray-500:#6b7280;
      --gray-700:#374151;
      --green-500:#22c55e;
      --green-600:#16a34a;
      --purple-500:#a855f7;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:linear-gradient(135deg,#e0f2fe,#eef2ff);
      color:#111827;
    }
    .page{
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
    .hero{
      background:linear-gradient(135deg,var(--blue-600),var(--blue-700));
      color:#fff;
      padding:2.5rem 1.25rem 6rem;
    }
    .container{
      width:100%;
      max-width:1120px;
      margin:0 auto;
      text-align:center;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:0.5rem;
      padding:0.25rem 0.85rem;
      border-radius:999px;
      background:rgba(255,255,255,0.1);
      border:1px solid rgba(255,255,255,0.25);
      font-size:0.8rem;
    }
    .hero-title{
      font-size:2.3rem;
      line-height:1.1;
      font-weight:700;
      margin:1rem auto 0.5rem;
    }
    .hero-subtitle{
      font-size:1.1rem;
      opacity:0.95;
      max-width:32rem;
      margin:0 auto;
    }
    .trust-row{
      margin-top:1.75rem;
      display:flex;
      flex-wrap:wrap;
      gap:0.75rem;
      justify-content:center;
    }
    .trust-item{
      flex:1 1 160px;
      max-width:220px;
      background:rgba(15,23,42,0.25);
      border-radius:0.9rem;
      padding:0.65rem 0.9rem;
      font-size:0.85rem;
      display:flex;
      align-items:center;
      gap:0.5rem;
      justify-content:center;
      white-space:nowrap;
    }
    .trust-dot{
      width:8px;height:8px;
      border-radius:999px;
      background:#bfdbfe;
      flex-shrink:0;
    }

    .card{
      width:100%;
      max-width:1120px;
      margin:-4rem auto 3rem;
      background:#fff;
      border-radius:1.5rem;
      box-shadow:0 20px 45px rgba(15,23,42,0.2);
      padding:1.8rem 1.5rem 2.2rem;
    }
    @media (min-width:768px){
      .card{padding:2.4rem 2.6rem 2.8rem;}
      .hero-title{font-size:2.7rem;}
    }

    /* Step indicator */
    .steps{
      display:flex;
      justify-content:space-between;
      gap:0.75rem;
      margin-bottom:2rem;
      max-width:640px;
      margin-inline:auto;
    }
    .step-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      flex:1;
      position:relative;
    }
    .step-circle{
      width:44px;height:44px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:var(--gray-100);
      border:2px solid var(--gray-200);
      color:var(--gray-400);
      font-weight:600;
      font-size:0.95rem;
      transition:all .2s ease;
      z-index:1;
    }
    .step-label{
      margin-top:0.45rem;
      font-size:0.8rem;
      color:var(--gray-500);
      font-weight:500;
    }
    .step-item.current .step-circle{
      background:linear-gradient(135deg,var(--blue-600),var(--blue-700));
      border-color:transparent;
      color:#fff;
      box-shadow:0 0 0 4px rgba(129,140,248,0.35);
      transform:scale(1.05);
    }
    .step-item.completed .step-circle{
      background:linear-gradient(135deg,var(--green-500),var(--green-600));
      border-color:transparent;
      color:#fff;
      box-shadow:0 0 0 4px rgba(34,197,94,0.35);
    }
    .step-item.completed .step-circle::before{
      content:"‚úì";
      font-weight:700;
    }
    .step-item.completed .step-circle span{
      display:none;
    }
    .step-item.current .step-label{
      color:var(--blue-700);
    }
    .step-item.completed .step-label{
      color:var(--green-600);
    }
    .step-line{
      position:absolute;
      top:22px;
      left:50%;
      right:-50%;
      height:3px;
      background:var(--gray-200);
      z-index:0;
    }
    .step-item.completed .step-line{
      background:linear-gradient(90deg,var(--green-500),var(--green-600));
    }

    /* Form layout */
    .form-step{display:none;}
    .form-step.active{display:block;}

    h2.step-title{
      text-align:center;
      font-size:1.35rem;
      margin:0 0 0.35rem;
      font-weight:700;
      color:#111827;
    }
    .step-subtitle{
      text-align:center;
      font-size:0.95rem;
      color:var(--gray-500);
      margin-bottom:1.6rem;
    }

    label{
      display:block;
      font-size:0.8rem;
      font-weight:500;
      margin-bottom:0.25rem;
      color:#4b5563;
    }
    input,select,textarea{
      width:100%;
      border-radius:0.75rem;
      border:1px solid var(--gray-200);
      padding:0.55rem 0.75rem;
      font-size:0.9rem;
      outline:none;
      transition:border-color .15s,box-shadow .15s;
      font-family:inherit;
    }
    input:focus,select:focus,textarea:focus{
      border-color:var(--blue-500);
      box-shadow:0 0 0 1px rgba(59,130,246,0.35);
    }
    textarea{
      min-height:90px;
      resize:vertical;
      border-radius:0.9rem;
    }
    .grid-2{
      display:grid;
      grid-template-columns:1fr;
      gap:1rem;
    }
    @media(min-width:768px){
      .grid-2{grid-template-columns:repeat(2,minmax(0,1fr));}
    }
    .pill-card{
      padding:1.1rem 1.15rem;
      border-radius:1.2rem;
      border:1px solid var(--gray-200);
      background:linear-gradient(135deg,var(--gray-50),#fff);
    }

    /* Checkbox Gr√∂√üe */
    input[type="checkbox"]{
      width:18px;
      height:18px;
      margin:0;
      accent-color:var(--blue-600);
    }

    /* Choice cards (step 3) */
    .choice-grid{
      display:grid;
      grid-template-columns:1fr;
      gap:0.75rem;
      margin-bottom:1.25rem;
    }
    .choice-card{
      border-radius:1.1rem;
      border:1px solid var(--gray-200);
      padding:0.75rem 0.95rem;
      display:flex;
      flex-direction:column;
      justify-content:center;
      cursor:pointer;
      background:#fff;
      transition:border-color .15s,box-shadow .15s,background .15s,transform .1s;
    }
    .choice-card:hover{
      border-color:var(--blue-400);
      box-shadow:0 6px 20px rgba(15,23,42,0.08);
      transform:translateY(-1px);
    }
    .choice-card.selected{
      border-color:var(--blue-500);
      background:linear-gradient(135deg,var(--blue-50),#fff);
      box-shadow:0 8px 24px rgba(37,99,235,0.25);
    }
    .choice-title{
      font-size:0.95rem;
      font-weight:600;
      margin-bottom:0.15rem;
    }
    .choice-sub{
      font-size:0.8rem;
      color:var(--gray-500);
    }
    @media(min-width:768px){
      .choice-grid-2{grid-template-columns:repeat(2,minmax(0,1fr));}
      .choice-grid-3{grid-template-columns:repeat(3,minmax(0,1fr));}
    }

    /* Matching step */
    .matching-circle{
      width:120px;height:120px;
      border-radius:999px;
      background:radial-gradient(circle at center,#22c55e,#16a34a);
      display:flex;
      align-items:center;
      justify-content:center;
      margin:1.5rem auto 1.2rem;
      box-shadow:0 12px 40px rgba(34,197,94,0.35);
      position:relative;
    }
    .matching-circle::before{
      content:"";
      position:absolute;
      inset:-18px;
      border-radius:999px;
      background:radial-gradient(circle at center,rgba(34,197,94,0.12),transparent);
    }
    .matching-circle span{
      font-size:2.2rem;
      color:#fff;
    }
    .matching-stats{
      display:grid;
      grid-template-columns:1fr;
      gap:0.75rem;
      margin-top:1.4rem;
    }
    .matching-card{
      border-radius:1.1rem;
      padding:0.9rem;
      text-align:center;
      background:var(--blue-50);
    }
    .matching-card:nth-child(2){background:#ecfdf5;}
    .matching-card:nth-child(3){background:#f5f3ff;}
    .matching-num{
      font-size:1.2rem;
      font-weight:700;
      color:var(--blue-700);
    }
    .matching-label{
      font-size:0.8rem;
      color:var(--gray-500);
    }
    .matching-hint{
      margin-top:1.2rem;
      text-align:center;
      font-size:0.85rem;
      color:var(--gray-500);
    }
    @media(min-width:768px){
      .matching-stats{
        grid-template-columns:repeat(3,minmax(0,1fr));
      }
    }

    /* Loading in step 4 */
    .matching-loading{
      text-align:center;
      padding:1.5rem 0 0.5rem;
      color:var(--gray-600);
      font-size:0.95rem;
    }
    .spinner{
      width:40px;
      height:40px;
      border-radius:999px;
      border:4px solid var(--blue-100);
      border-top-color:var(--blue-600);
      margin:0.5rem auto 0.75rem;
      animation:spin 1s linear infinite;
    }
    @keyframes spin{
      to{transform:rotate(360deg);}
    }

    /* Footer / nav */
    .nav-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:0.75rem;
      margin-top:1.8rem;
      padding-top:1.2rem;
      border-top:1px solid var(--gray-100);
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:0.35rem;
      border-radius:999px;
      padding:0.6rem 1.4rem;
      border:1px solid transparent;
      font-size:0.9rem;
      font-weight:500;
      cursor:pointer;
      background:#fff;
      color:#111827;
    }
    .btn-outline{
      border-color:var(--gray-300);
      background:#fff;
    }
    .btn-primary{
      background:linear-gradient(135deg,var(--blue-600),var(--blue-700));
      color:#fff;
      box-shadow:0 12px 30px rgba(37,99,235,0.45);
    }
    .btn-primary:disabled{
      opacity:0.5;
      cursor:not-allowed;
      box-shadow:none;
    }
    .btn-outline:disabled{
      opacity:0.5;
      cursor:not-allowed;
    }

    .error{
      color:var(--gray-500);
      font-size:0.8rem;
      margin-top:0.15rem;
    }
    .hint{
      font-size:0.85rem;
      color:var(--gray-500);
    }

    .success-message{
      text-align:center;
      padding:2rem 1rem 0.5rem;
    }
    .success-message h2{
      font-size:1.5rem;
      margin-bottom:0.75rem;
    }

    /* SMS-Box */
    .verify-box{
      margin-top:0.8rem;
      border-radius:1rem;
      border:1px solid #bbf7d0;
      background:#ecfdf5;
      padding:0.75rem 0.9rem;
      font-size:0.85rem;
    }
    .verify-header{
      display:flex;
      align-items:center;
      gap:0.5rem;
      font-weight:600;
      margin-bottom:0.35rem;
    }
    .verify-btn{
      margin-top:0.5rem;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:0.35rem 0.9rem;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:0.8rem;
      background:linear-gradient(135deg,var(--green-500),var(--green-600));
      color:#fff;
    }
    .verify-code{
      margin-top:0.6rem;
      display:flex;
      flex-direction:column;
      gap:0.35rem;
    }
    .verify-code input{
      max-width:140px;
    }

    /* Zusammenfassung nach dem Absenden */
    .summary-message{
      margin-top:1.5rem;
      padding:1rem 1.1rem;
      border-radius:1rem;
      background:#f3f4f6;
      border:1px solid var(--gray-200);
      font-size:0.9rem;
    }
    .summary-message h3{
      margin:0 0 0.5rem;
      font-size:1rem;
    }
    .summary-line{
      margin:0.15rem 0;
    }
    .summary-section{
      margin-top:0.5rem;
    }
  </style>
</head>
<body>
<div class="page">
  <header class="hero">
    <div class="container">
      <div class="badge">Kostenlose &amp; unverbindliche Umzugsanfrage</div>
      <h1 class="hero-title">Umzugskosten vergleichen</h1>
      <p class="hero-subtitle">In wenigen Schritten Angebote von qualifizierten Umzugsunternehmen erhalten.</p>

      <div class="trust-row">
        <div class="trust-item">
          <div class="trust-dot"></div>
          <span>Deutschlandweit</span>
        </div>
        <div class="trust-item">
          <div class="trust-dot"></div>
          <span>Qualifizierte Unternehmen</span>
        </div>
        <div class="trust-item">
          <div class="trust-dot"></div>
          <span>100% kostenlos</span>
        </div>
      </div>
    </div>
  </header>

  <main class="card">
    <!-- Step indicator -->
    <div class="steps" id="stepIndicator">
      <div class="step-item current" data-step="1">
        <div class="step-circle"><span>1</span></div>
        <div class="step-label">Route</div>
        <div class="step-line"></div>
      </div>
      <div class="step-item" data-step="2">
        <div class="step-circle"><span>2</span></div>
        <div class="step-label">Wohnung</div>
        <div class="step-line"></div>
      </div>
      <div class="step-item" data-step="3">
        <div class="step-circle"><span>3</span></div>
        <div class="step-label">Details</div>
        <div class="step-line"></div>
      </div>
      <div class="step-item" data-step="4">
        <div class="step-circle"><span>4</span></div>
        <div class="step-label">Matching</div>
        <div class="step-line"></div>
      </div>
      <div class="step-item" data-step="5">
        <div class="step-circle"><span>5</span></div>
        <div class="step-label">Kontakt</div>
      </div>
    </div>

    <!-- STEP 1: ROUTE -->
    <div class="form-step active" data-step="1">
      <h2 class="step-title">Von wo nach wo ziehen Sie?</h2>
      <p class="step-subtitle">Geben Sie Ihre Umzugsroute an.</p>

      <div class="grid-2">
        <!-- Auszug -->
        <div class="pill-card">
          <h3 style="margin:0 0 0.7rem;font-size:0.95rem;font-weight:600;display:flex;align-items:center;gap:0.4rem;">
            <span style="width:8px;height:8px;border-radius:999px;background:#ef4444;"></span>
            Wohnung Auszug
          </h3>
          <div style="margin-bottom:0.6rem;">
            <label for="move_from_zip">Postleitzahl*</label>
            <input id="move_from_zip" type="text" inputmode="numeric" />
            <div class="error" id="err_from_zip"></div>
          </div>
          <div>
            <label for="move_from_city">Stadt (optional)</label>
            <input id="move_from_city" type="text" />
          </div>
        </div>

        <!-- Einzug -->
        <div class="pill-card">
          <h3 style="margin:0 0 0.7rem;font-size:0.95rem;font-weight:600;display:flex;align-items:center;gap:0.4rem;">
            <span style="width:8px;height:8px;border-radius:999px;background:#22c55e;"></span>
            Wohnung Einzug
          </h3>
          <div style="margin-bottom:0.6rem;">
            <label for="move_to_zip">Postleitzahl*</label>
            <input id="move_to_zip" type="text" inputmode="numeric" />
            <div class="error" id="err_to_zip"></div>
          </div>
          <div>
            <label for="move_to_city">Stadt (optional)</label>
            <input id="move_to_city" type="text" />
          </div>
        </div>
      </div>
    </div>

    <!-- STEP 2: WOHNUNG -->
    <div class="form-step" data-step="2">
      <h2 class="step-title">Details zu den Wohnungen</h2>
      <p class="step-subtitle">Diese Angaben sind freiwillig ‚Äì helfen aber, den Aufwand besser einzusch√§tzen.</p>

      <div class="grid-2">
        <!-- Wohnung Auszug -->
        <div class="pill-card">
          <h3 style="margin:0 0 0.75rem;font-size:0.95rem;font-weight:600;display:flex;align-items:center;gap:0.4rem;">
            <span style="width:8px;height:8px;border-radius:999px;background:#ef4444;"></span>
            Wohnung Auszug
          </h3>

          <div style="margin-bottom:0.65rem;">
            <label for="living_space_from">Wohnfl√§che (m¬≤)</label>
            <input id="living_space_from" type="number" inputmode="numeric" min="0" />
          </div>
          <div style="margin-bottom:0.65rem;">
            <label for="rooms_from">Anzahl Zimmer</label>
            <input id="rooms_from" type="number" inputmode="numeric" min="0" step="1" />
          </div>
          <div style="margin-bottom:0.8rem;">
            <label for="floor_from">Etage</label>
            <select id="floor_from">
              <option value="">Bitte w√§hlen</option>
              <option value="-1">-1</option>
              <option value="0">EG</option>
              <option value="1">1. OG</option>
              <option value="2">2. OG</option>
              <option value="3">3. OG</option>
              <option value="4">4. OG</option>
              <option value="5">5. OG</option>
              <option value="6">6. OG</option>
              <option value="7">7. OG</option>
              <option value="8">8. OG</option>
              <option value="9">9. OG</option>
              <option value="10">10. OG</option>
              <option value="egal">Egal</option>
            </select>
          </div>

          <div style="display:flex;align-items:center;gap:0.55rem;">
            <input type="checkbox" id="has_elevator_from" />
            <label for="has_elevator_from" style="margin:0;font-size:0.88rem;cursor:pointer;">Aufzug vorhanden</label>
          </div>
        </div>

        <!-- Wohnung Einzug -->
        <div class="pill-card">
          <h3 style="margin:0 0 0.75rem;font-size:0.95rem;font-weight:600;display:flex;align-items:center;gap:0.4rem;">
            <span style="width:8px;height:8px;border-radius:999px;background:#22c55e;"></span>
            Wohnung Einzug
          </h3>

          <div style="margin-bottom:0.65rem;">
            <label for="living_space_to">Wohnfl√§che (m¬≤)</label>
            <input id="living_space_to" type="number" inputmode="numeric" min="0" />
          </div>
          <div style="margin-bottom:0.65rem;">
            <label for="rooms_to">Anzahl Zimmer</label>
            <input id="rooms_to" type="number" inputmode="numeric" min="0" step="1" />
          </div>
          <div style="margin-bottom:0.8rem;">
            <label for="floor_to">Etage</label>
            <select id="floor_to">
              <option value="">Bitte w√§hlen</option>
              <option value="-1">-1</option>
              <option value="0">EG</option>
              <option value="1">1. OG</option>
              <option value="2">2. OG</option>
              <option value="3">3. OG</option>
              <option value="4">4. OG</option>
              <option value="5">5. OG</option>
              <option value="6">6. OG</option>
              <option value="7">7. OG</option>
              <option value="8">8. OG</option>
              <option value="9">9. OG</option>
              <option value="10">10. OG</option>
              <option value="egal">Egal</option>
            </select>
          </div>

          <div style="display:flex;align-items:center;gap:0.55rem;">
            <input type="checkbox" id="has_elevator_to" />
            <label for="has_elevator_to" style="margin:0;font-size:0.88rem;cursor:pointer;">Aufzug vorhanden</label>
          </div>
        </div>
      </div>
    </div>

    <!-- STEP 3: ART DES UMZUGS -->
    <div class="form-step" data-step="3">
      <h2 class="step-title">Art des Umzugs</h2>
      <p class="step-subtitle">Damit wir passende Angebote finden k√∂nnen.</p>

      <div style="margin-bottom:1.1rem;font-size:0.9rem;font-weight:600;">Privat oder gesch√§ftlich?</div>
      <div class="choice-grid choice-grid-2">
        <div class="choice-card" data-choice-group="move_type" data-choice-value="privat">
          <div class="choice-title">Privatumzug</div>
          <div class="choice-sub">Wohnungswechsel, Hausumzug</div>
        </div>
        <div class="choice-card" data-choice-group="move_type" data-choice-value="geschaeft">
          <div class="choice-title">Gesch√§ftsumzug</div>
          <div class="choice-sub">B√ºroumzug, Firmensitz</div>
        </div>
      </div>

      <div style="margin:1.1rem 0 0.9rem;font-size:0.9rem;font-weight:600;">Geht der Umzug ins Ausland?</div>
      <div class="choice-grid choice-grid-2">
        <div class="choice-card" data-choice-group="is_international" data-choice-value="false">
          <div class="choice-title">Innerhalb Deutschlands</div>
          <div class="choice-sub">Lokaler oder nationaler Umzug</div>
        </div>
        <div class="choice-card" data-choice-group="is_international" data-choice-value="true">
          <div class="choice-title">Ins Ausland</div>
          <div class="choice-sub">Internationaler Umzug</div>
        </div>
      </div>

      <div style="margin:1.1rem 0 0.9rem;font-size:0.9rem;font-weight:600;">Umfang des Umzugs</div>
      <div class="choice-grid choice-grid-3">
        <div class="choice-card" data-choice-group="move_scope" data-choice-value="ganzer_haushalt">
          <div class="choice-title">Ganzer Haushalt</div>
          <div class="choice-sub">Komplette Wohnung / Haus</div>
        </div>
        <div class="choice-card" data-choice-group="move_scope" data-choice-value="halber_haushalt">
          <div class="choice-title">Halber Haushalt</div>
          <div class="choice-sub">Teilweise M√∂bel &amp; Kartons</div>
        </div>
        <div class="choice-card" data-choice-group="move_scope" data-choice-value="teilumzug">
          <div class="choice-title">Nur Kartons</div>
          <div class="choice-sub">Wenige Gegenst√§nde</div>
        </div>
      </div>

      <div style="margin-top:1.2rem;">
        <label for="move_notes">Optionale Infos zum Umzug (optional)</label>
        <textarea id="move_notes" placeholder="z.B. empfindliche M√∂bel, Halteverbotszone, gew√ºnschte Zusatzleistungen ‚Ä¶"></textarea>
      </div>

      <div class="error" id="err_step3" style="margin-top:0.4rem;"></div>
    </div>

    <!-- STEP 4: MATCHING -->
    <div class="form-step" data-step="4">
      <!-- Loading-Phase -->
      <div id="matchingLoading" class="matching-loading">
        <div class="spinner"></div>
        <div>Wir suchen passende Umzugsunternehmen in Ihrer N√§he ‚Ä¶</div>
      </div>

      <!-- Ergebnis -->
      <div id="matchingResult" style="display:none;">
        <h2 class="step-title">Unternehmen in Ihrer N√§he gefunden! ‚ú®</h2>
        <p class="step-subtitle">Wir haben passende Umzugspartner in Ihrer Region identifiziert.</p>

        <div class="matching-circle">
          <span>‚úì</span>
        </div>

        <div class="matching-stats">
          <div class="matching-card">
            <div class="matching-num">4‚Äì6</div>
            <div class="matching-label">Umzugsfirmen</div>
          </div>
          <div class="matching-card">
            <div class="matching-num">100&nbsp;%</div>
            <div class="matching-label">Gepr√ºft</div>
          </div>
          <div class="matching-card">
            <div class="matching-num">24h</div>
            <div class="matching-label">Antwort</div>
          </div>
        </div>

        <div class="matching-hint">
          Fast geschafft! Nur noch Ihre Kontaktdaten, damit die passenden Unternehmen Sie erreichen k√∂nnen.
        </div>
      </div>
    </div>

    <!-- STEP 5: KONTAKT -->
    <div class="form-step" data-step="5">
      <h2 class="step-title">Ihre Kontaktdaten &amp; Umzugstermin</h2>
      <p class="step-subtitle">Damit die Umzugsfirmen Ihnen passende Angebote zusenden k√∂nnen.</p>

      <div class="grid-2">
        <div>
          <div style="margin-bottom:0.6rem;">
            <label for="customer_name">Ihr Name*</label>
            <input id="customer_name" type="text" />
            <div class="error" id="err_name"></div>
          </div>
          <div style="margin-bottom:0.6rem;">
            <label for="phone">Telefonnummer*</label>
            <input id="phone" type="tel" inputmode="numeric" pattern="[0-9]*" />
            <div class="error" id="err_phone"></div>

            <!-- SMS-Verifizierung (optional) -->
            <div id="verificationBox" class="verify-box" style="display:none;">
              <div class="verify-header">
                <span>üì≤</span>
                <span>Schnellere Angebote mit Verifizierung</span>
              </div>
              <div>Best√§tigen Sie Ihre Telefonnummer per SMS und erhalten Sie bis zu 30&nbsp;% schneller Angebote.</div>
              <button type="button" id="btnStartVerify" class="verify-btn">Jetzt verifizieren</button>

              <div id="verifyCodeBox" class="verify-code" style="display:none;">
                <label for="verify_code">SMS-Code eingeben (optional)</label>
                <input id="verify_code" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="6" placeholder="z.B. 123456" />
                <span class="hint">Die Verifizierung ist freiwillig und kein Pflichtfeld.</span>
              </div>
            </div>
          </div>
          <div style="margin-bottom:0.6rem;">
            <label for="email">E-Mail-Adresse*</label>
            <input id="email" type="email" />
            <div class="error" id="err_email"></div>
          </div>
        </div>

        <div>
          <div style="margin-bottom:0.6rem;">
            <label for="move_date_type">Umzugstermin*</label>
            <select id="move_date_type">
              <option value="fest">Festes Datum</option>
              <option value="zeitraum">Zeitraum</option>
            </select>
          </div>
          <div id="date_fixed">
            <label for="move_date">Datum*</label>
            <input id="move_date" type="date" />
          </div>
          <div id="date_range" style="display:none;">
            <div style="margin-bottom:0.5rem;">
              <label for="move_date_from">Von*</label>
              <input id="move_date_from" type="date" />
            </div>
            <div>
              <label for="move_date_to">Bis*</label>
              <input id="move_date_to" type="date" />
            </div>
          </div>
          <div class="error" id="err_date" style="margin-top:0.35rem;"></div>
        </div>
      </div>

      <p class="hint" style="margin-top:0.85rem;">
        Mit dem Absenden Ihrer Anfrage stimmen Sie zu, dass ausgew√§hlte Umzugsunternehmen Sie
        telefonisch oder per E-Mail zur Angebotserstellung kontaktieren d√ºrfen.
      </p>
    </div>

    <!-- Nav row -->
    <div class="nav-row">
      <button class="btn btn-outline" id="btnBack">Zur√ºck</button>
      <button class="btn btn-primary" id="btnNext">Weiter</button>
    </div>

    <!-- Erfolg -->
    <div id="success" style="display:none;">
      <div class="success-message">
        <h2>Vielen Dank f√ºr Ihre Anfrage! üéâ</h2>
        <p class="hint">
          Ihre Daten wurden gespeichert. In der Regel erhalten Sie innerhalb von 24&nbsp;Stunden erste Angebote
          von Umzugsunternehmen aus Ihrer Region.
        </p>
      </div>
    </div>

    <!-- Sichtbare "Nachricht" nach dem Absenden -->
    <div id="summaryMessage" class="summary-message" style="display:none;">
      <!-- Inhalt wird per JS gef√ºllt -->
    </div>
  </main>
</div>

<script>
  const TOTAL_STEPS = 5;
  let currentStep = 1;
  const formData = {};
  let todayStr = null;

  const stepEls = document.querySelectorAll(".form-step");
  const indicatorItems = document.querySelectorAll("#stepIndicator .step-item");
  const btnBack = document.getElementById("btnBack");
  const btnNext = document.getElementById("btnNext");
  const successBox = document.getElementById("success");

  const loadingBox = document.getElementById("matchingLoading");
  const resultBox = document.getElementById("matchingResult");

  function initDatesMin(){
    const today = new Date();
    today.setHours(0,0,0,0);
    todayStr = today.toISOString().split("T")[0];
    ["move_date","move_date_from","move_date_to"].forEach(id=>{
      const el = document.getElementById(id);
      if(el) el.min = todayStr;
    });
  }

  function showStep(step){
    currentStep = step;
    stepEls.forEach(el=>{
      el.classList.toggle("active", Number(el.dataset.step) === step);
    });
    indicatorItems.forEach(item=>{
      const s = Number(item.dataset.step);
      item.classList.toggle("current", s === step);
      item.classList.toggle("completed", s < step);
    });

    btnBack.disabled = (step === 1);

    // Step 4: kein Weiter-Button
    if(step === 4){
      btnNext.style.display = "none";
      runMatchingAnimation();
    }else{
      btnNext.style.display = "inline-flex";
    }

    btnNext.textContent = (step === TOTAL_STEPS) ? "Angebote erhalten" : "Weiter";
    validateStep();
  }

  function collectData(){
    // Step 1
    formData.move_from_zip = document.getElementById("move_from_zip").value.trim();
    formData.move_from_city = document.getElementById("move_from_city").value.trim();
    formData.move_to_zip = document.getElementById("move_to_zip").value.trim();
    formData.move_to_city = document.getElementById("move_to_city").value.trim();

    // Step 2
    formData.living_space_from = document.getElementById("living_space_from").value;
    formData.rooms_from = document.getElementById("rooms_from").value;
    formData.floor_from = document.getElementById("floor_from").value;
    formData.has_elevator_from = document.getElementById("has_elevator_from").checked;

    formData.living_space_to = document.getElementById("living_space_to").value;
    formData.rooms_to = document.getElementById("rooms_to").value;
    formData.floor_to = document.getElementById("floor_to").value;
    formData.has_elevator_to = document.getElementById("has_elevator_to").checked;

    // Step 3 (Choice-Cards + optionales Textfeld)
    formData.move_notes = document.getElementById("move_notes")?.value.trim() || "";

    // Step 5
    formData.customer_name = document.getElementById("customer_name").value.trim();
    formData.phone = document.getElementById("phone").value.trim();
    formData.email = document.getElementById("email").value.trim();
    const dateType = document.getElementById("move_date_type").value;
    formData.move_date_type = dateType;
    formData.move_date = document.getElementById("move_date").value;
    formData.move_date_from = document.getElementById("move_date_from").value;
    formData.move_date_to = document.getElementById("move_date_to").value;
    formData.verify_code = document.getElementById("verify_code")?.value.trim() || "";
  }

  function clearErrors(){
    document.querySelectorAll(".error").forEach(e=>e.textContent="");
  }

  function validateStep(){
    clearErrors();
    collectData();
    let valid = true;

    if(currentStep === 1){
      if(!formData.move_from_zip){
        const el = document.getElementById("err_from_zip");
        if(el) el.textContent = "Bitte Postleitzahl eingeben.";
        valid = false;
      }
      if(!formData.move_to_zip){
        const el2 = document.getElementById("err_to_zip");
        if(el2) el2.textContent = "Bitte Postleitzahl eingeben.";
        valid = false;
      }
    }

    if(currentStep === 3){
      if(!formData.move_type || typeof formData.is_international === "undefined" || !formData.move_scope){
        const el3 = document.getElementById("err_step3");
        if(el3){
          el3.textContent = "Bitte w√§hlen Sie jeweils eine Option aus allen Bereichen.";
        }
        valid = false;
      }
    }

    if(currentStep === 5){
      if(!formData.customer_name){
        const el4 = document.getElementById("err_name");
        if(el4) el4.textContent = "Bitte Namen eingeben.";
        valid = false;
      }
      if(!formData.phone){
        const el5 = document.getElementById("err_phone");
        if(el5) el5.textContent = "Bitte Telefonnummer eingeben.";
        valid = false;
      }
      if(!formData.email){
        const el6 = document.getElementById("err_email");
        if(el6) el6.textContent = "Bitte E-Mail eingeben.";
        valid = false;
      }

      let hasDateInfo = false;
      let dateError = "";

      if(formData.move_date_type === "fest"){
        hasDateInfo = !!formData.move_date;
        if(hasDateInfo && todayStr && formData.move_date < todayStr){
          dateError = "Das Datum darf nicht in der Vergangenheit liegen.";
          hasDateInfo = false;
        }
      } else {
        hasDateInfo = !!(formData.move_date_from && formData.move_date_to);
        if(hasDateInfo && todayStr){
          if(formData.move_date_from < todayStr || formData.move_date_to < todayStr){
            dateError = "Die Daten d√ºrfen nicht in der Vergangenheit liegen.";
            hasDateInfo = false;
          } else if(formData.move_date_from > formData.move_date_to){
            dateError = "Der Zeitraum ist ung√ºltig (Von-Datum liegt nach dem Bis-Datum).";
            hasDateInfo = false;
          }
        }
      }

      if(!hasDateInfo){
        const el7 = document.getElementById("err_date");
        if(el7){
          el7.textContent = dateError || "Bitte Umzugstermin angeben.";
        }
        valid = false;
      }
    }

    if(currentStep !== 4){ // in Step 4 gibt es keinen Weiter-Button
      btnNext.disabled = !valid;
    }
    return valid;
  }

  btnBack.addEventListener("click", ()=>{
    if(currentStep>1){
      showStep(currentStep-1);
    }
  });

  btnNext.addEventListener("click", ()=>{
    if(!validateStep()) return;

    if(currentStep < TOTAL_STEPS){
      showStep(currentStep+1);
    }else{
      // Submit (hier sp√§ter API/Backend anbinden)
      collectData();
      console.log("Formular-Daten:", formData);
      document.querySelector("main.card").scrollIntoView({behavior:"smooth"});
      successBox.style.display = "block";
      btnBack.disabled = true;
      btnNext.disabled = true;

      // Zusammenfassung als einzelne ‚ÄûNachricht‚Äú anzeigen
      const summaryEl = document.getElementById("summaryMessage");
      if(summaryEl){
        summaryEl.style.display = "block";
        summaryEl.innerHTML = createSummaryHtml();
      }
    }
  });

  // Choice cards (step 3)
  document.querySelectorAll(".choice-card").forEach(card=>{
    card.addEventListener("click", ()=>{
      const group = card.dataset.choiceGroup;
      const value = card.dataset.choiceValue;
      document.querySelectorAll(`.choice-card[data-choice-group="${group}"]`)
        .forEach(c=>c.classList.remove("selected"));
      card.classList.add("selected");

      if(group === "move_type"){
        formData.move_type = value;
      }else if(group === "is_international"){
        formData.is_international = (value === "true");
      }else if(group === "move_scope"){
        formData.move_scope = value;
      }
      validateStep();
    });
  });

  // Date switch step 5
  const dateTypeSelect = document.getElementById("move_date_type");
  const dateFixed = document.getElementById("date_fixed");
  const dateRange = document.getElementById("date_range");
  dateTypeSelect.addEventListener("change", ()=>{
    if(dateTypeSelect.value === "fest"){
      dateFixed.style.display="block";
      dateRange.style.display="none";
    }else{
      dateFixed.style.display="none";
      dateRange.style.display="block";
    }
    validateStep();
  });

  // Live validation basics
  document.querySelectorAll("input,select,textarea").forEach(el=>{
    el.addEventListener("input", ()=>{
      if(currentStep === 1 || currentStep === 5){
        validateStep();
      }
    });
  });

  // Nur Ziffern in Telefonfeld
  const phoneInput = document.getElementById("phone");
  const verificationBox = document.getElementById("verificationBox");
  const verifyCodeBox = document.getElementById("verifyCodeBox");
  const btnStartVerify = document.getElementById("btnStartVerify");
  const verifyCodeInput = document.getElementById("verify_code");

  phoneInput.addEventListener("input", ()=>{
    phoneInput.value = phoneInput.value.replace(/\D/g,"");
    if(phoneInput.value.length > 0){
      verificationBox.style.display = "block";
    }else{
      verificationBox.style.display = "none";
      verifyCodeBox.style.display = "none";
      if(verifyCodeInput) verifyCodeInput.value = "";
    }
    if(currentStep === 5) validateStep();
  });

  btnStartVerify.addEventListener("click", ()=>{
    verifyCodeBox.style.display = "flex";
  });

  // Matching-Animation in Schritt 4
  function runMatchingAnimation(){
    if(!loadingBox || !resultBox) return;
    loadingBox.style.display = "block";
    resultBox.style.display = "none";

    // Nach 2 Sekunden Ergebnis anzeigen
    setTimeout(()=>{
      loadingBox.style.display = "none";
      resultBox.style.display = "block";
    },2000);

    // Nach insgesamt 4 Sekunden automatisch zu Schritt 5
    setTimeout(()=>{
      if(currentStep === 4){
        showStep(5);
      }
    },4000);
  }

  // Kleine Helper f√ºr die Zusammenfassung
  function escapeHtml(str){
    if(!str) return "";
    return str
      .replace(/&/g,"&amp;")
      .replace(/</g,"&lt;")
      .replace(/>/g,"&gt;")
      .replace(/"/g,"&quot;")
      .replace(/'/g,"&#039;");
  }

  function createSummaryHtml(){
    const route = `${escapeHtml(formData.move_from_zip || "")} ${escapeHtml(formData.move_from_city || "")} ‚Üí ${escapeHtml(formData.move_to_zip || "")} ${escapeHtml(formData.move_to_city || "")}`.trim();

    let moveTypeText = "";
    if(formData.move_type === "privat") moveTypeText = "Privatumzug";
    if(formData.move_type === "geschaeft") moveTypeText = "Gesch√§ftsumzug";

    let intlText = "";
    if(typeof formData.is_international !== "undefined"){
      intlText = formData.is_international ? "Ins Ausland" : "Innerhalb Deutschlands";
    }

    let scopeText = "";
    if(formData.move_scope === "ganzer_haushalt") scopeText = "Ganzer Haushalt";
    if(formData.move_scope === "halber_haushalt") scopeText = "Halber Haushalt";
    if(formData.move_scope === "teilumzug") scopeText = "Nur Kartons";

    let dateText = "";
    if(formData.move_date_type === "fest" && formData.move_date){
      dateText = `Festes Datum: ${escapeHtml(formData.move_date)}`;
    }else if(formData.move_date_type === "zeitraum" && formData.move_date_from && formData.move_date_to){
      dateText = `Zeitraum: ${escapeHtml(formData.move_date_from)} ‚Äì ${escapeHtml(formData.move_date_to)}`;
    }

    return `
      <h3>Ihre Anfrage im √úberblick</h3>
      <div class="summary-section">
        <p class="summary-line"><strong>Route:</strong> ${route}</p>
        <p class="summary-line"><strong>Art des Umzugs:</strong> ${escapeHtml(moveTypeText)}</p>
        <p class="summary-line"><strong>Umzug:</strong> ${escapeHtml(intlText)}</p>
        <p class="summary-line"><strong>Umfang:</strong> ${escapeHtml(scopeText)}</p>
        ${formData.move_notes ? `<p class="summary-line"><strong>Infos zum Umzug:</strong> ${escapeHtml(formData.move_notes)}</p>` : ""}
      </div>
      <div class="summary-section">
        <p class="summary-line"><strong>Umzugstermin:</strong> ${escapeHtml(dateText)}</p>
      </div>
      <div class="summary-section">
        <p class="summary-line"><strong>Ansprechpartner:</strong> ${escapeHtml(formData.customer_name || "")}</p>
        <p class="summary-line"><strong>Telefon:</strong> ${escapeHtml(formData.phone || "")}</p>
        <p class="summary-line"><strong>E-Mail:</strong> ${escapeHtml(formData.email || "")}</p>
      </div>
    `;
  }

  // Initial
  initDatesMin();
  validateStep();
</script>
</body>
</html>
