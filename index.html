<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>umzugkostencheck.de – Umzugskosten vergleichen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      /* Backend-Blau */
      --brand-600:#0050b3;
      --brand-700:#003f8f;

      --blue-50:#eff6ff;
      --blue-100:#dbeafe;
      --gray-50:#f9fafb;
      --gray-100:#f3f4f6;
      --gray-200:#e5e7eb;
      --gray-300:#d1d5db;
      --gray-400:#9ca3af;
      --gray-500:#6b7280;
      --gray-600:#4b5563;
      --gray-700:#374151;

      --green-500:#22c55e;
      --green-600:#16a34a;
      --purple-500:#a855f7;
      --red-500:#ef4444;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:linear-gradient(135deg,#e0f2fe,#eef2ff);
      color:#111827;
    }
    .page{min-height:100vh;display:flex;flex-direction:column;}
    .hero{
      background:linear-gradient(135deg,var(--brand-600),var(--brand-700));
      color:#fff;
      padding:2.5rem 1.25rem 6rem;
    }
    .container{width:100%;max-width:1120px;margin:0 auto;text-align:center;}
    .badge{
      display:inline-flex;align-items:center;gap:0.5rem;
      padding:0.25rem 0.85rem;border-radius:999px;
      background:rgba(255,255,255,0.1);
      border:1px solid rgba(255,255,255,0.25);
      font-size:0.8rem;
    }
    .hero-title{font-size:2.3rem;line-height:1.1;font-weight:700;margin:1rem auto 0.5rem;}
    .hero-subtitle{font-size:1.1rem;opacity:0.95;max-width:32rem;margin:0 auto;}
    .trust-row{margin-top:1.75rem;display:flex;flex-wrap:wrap;gap:0.75rem;justify-content:center;}
    .trust-item{
      flex:1 1 160px;max-width:220px;background:rgba(15,23,42,0.25);
      border-radius:0.9rem;padding:0.65rem 0.9rem;font-size:0.85rem;
      display:flex;align-items:center;gap:0.5rem;justify-content:center;white-space:nowrap;
    }
    .trust-dot{width:8px;height:8px;border-radius:999px;background:#bfdbfe;flex-shrink:0;}

    .card{
      width:100%;max-width:1120px;margin:-4rem auto 3rem;background:#fff;
      border-radius:1.5rem;box-shadow:0 20px 45px rgba(15,23,42,0.2);
      padding:1.8rem 1.5rem 2.2rem;
    }
    @media (min-width:768px){
      .card{padding:2.4rem 2.6rem 2.8rem;}
      .hero-title{font-size:2.7rem;}
    }

    /* Step indicator */
    .steps{
      display:flex;justify-content:space-between;gap:0.75rem;
      margin-bottom:2rem;max-width:640px;margin-inline:auto;
    }
    .step-item{display:flex;flex-direction:column;align-items:center;flex:1;position:relative;}
    .step-circle{
      width:44px;height:44px;border-radius:999px;display:flex;align-items:center;justify-content:center;
      background:var(--gray-100);border:2px solid var(--gray-200);color:var(--gray-400);
      font-weight:600;font-size:0.95rem;transition:all .2s ease;z-index:1;
    }
    .step-label{margin-top:0.45rem;font-size:0.8rem;color:var(--gray-500);font-weight:500;}
    .step-item.current .step-circle{
      background:linear-gradient(135deg,var(--brand-600),var(--brand-700));
      border-color:transparent;color:#fff;
      box-shadow:0 0 0 4px rgba(0,80,179,0.22);
      transform:scale(1.05);
    }
    .step-item.completed .step-circle{
      background:linear-gradient(135deg,var(--green-500),var(--green-600));
      border-color:transparent;color:#fff;
      box-shadow:0 0 0 4px rgba(34,197,94,0.28);
    }
    .step-item.completed .step-circle::before{content:"✓";font-weight:700;}
    .step-item.completed .step-circle span{display:none;}
    .step-item.current .step-label{color:var(--brand-700);}
    .step-item.completed .step-label{color:var(--green-600);}
    .step-line{
      position:absolute;top:22px;left:50%;right:-50%;
      height:3px;background:var(--gray-200);z-index:0;
    }
    .step-item.completed .step-line{
      background:linear-gradient(90deg,var(--green-500),var(--green-600));
    }

    /* Form layout */
    .form-step{display:none;}
    .form-step.active{display:block;}

    h2.step-title{text-align:center;font-size:1.35rem;margin:0 0 0.35rem;font-weight:700;color:#111827;}
    .step-subtitle{text-align:center;font-size:0.95rem;color:var(--gray-500);margin-bottom:1.6rem;}

    label{display:block;font-size:0.8rem;font-weight:500;margin-bottom:0.25rem;color:var(--gray-600);}
    .req{color:var(--red-500);font-weight:700;margin-left:2px;}

    input,select,textarea{
      width:100%;border-radius:0.75rem;border:1px solid var(--gray-200);
      padding:0.55rem 0.75rem;font-size:0.9rem;outline:none;
      transition:border-color .15s,box-shadow .15s;font-family:inherit;
    }
    input:focus,select:focus,textarea:focus{
      border-color:var(--brand-600);
      box-shadow:0 0 0 2px rgba(0,80,179,0.18);
    }
    textarea{min-height:90px;resize:vertical;border-radius:0.9rem;}
    .grid-2{display:grid;grid-template-columns:1fr;gap:1rem;}
    @media(min-width:768px){.grid-2{grid-template-columns:repeat(2,minmax(0,1fr));}}
    .pill-card{
      padding:1.1rem 1.15rem;border-radius:1.2rem;border:1px solid var(--gray-200);
      background:linear-gradient(135deg,var(--gray-50),#fff);
    }

    /* Checkbox */
    input[type="checkbox"]{width:18px;height:18px;margin:0;accent-color:var(--brand-600);}

    /* Choice cards (step 3) */
    .choice-grid{display:grid;grid-template-columns:1fr;gap:0.75rem;margin-bottom:1.25rem;}
    .choice-card{
      border-radius:1.1rem;border:1px solid var(--gray-200);padding:0.75rem 0.95rem;
      display:flex;flex-direction:column;justify-content:center;cursor:pointer;background:#fff;
      transition:border-color .15s,box-shadow .15s,background .15s,transform .1s;
    }
    .choice-card:hover{
      border-color:rgba(0,80,179,0.45);
      box-shadow:0 6px 20px rgba(15,23,42,0.08);
      transform:translateY(-1px);
    }
    .choice-card.selected{
      border-color:rgba(0,80,179,0.65);
      background:linear-gradient(135deg,var(--blue-50),#fff);
      box-shadow:0 8px 24px rgba(0,80,179,0.18);
    }
    .choice-title{font-size:0.95rem;font-weight:600;margin-bottom:0.15rem;}
    .choice-sub{font-size:0.8rem;color:var(--gray-500);}
    @media(min-width:768px){
      .choice-grid-2{grid-template-columns:repeat(2,minmax(0,1fr));}
      .choice-grid-3{grid-template-columns:repeat(3,minmax(0,1fr));}
    }

    /* Matching step */
    .matching-circle{
      width:120px;height:120px;border-radius:999px;
      background:radial-gradient(circle at center,#22c55e,#16a34a);
      display:flex;align-items:center;justify-content:center;
      margin:1.5rem auto 1.2rem;
      box-shadow:0 12px 40px rgba(34,197,94,0.35);position:relative;
    }
    .matching-circle::before{
      content:"";position:absolute;inset:-18px;border-radius:999px;
      background:radial-gradient(circle at center,rgba(34,197,94,0.12),transparent);
    }
    .matching-circle span{font-size:2.2rem;color:#fff;}
    .matching-stats{display:grid;grid-template-columns:1fr;gap:0.75rem;margin-top:1.4rem;}
    .matching-card{border-radius:1.1rem;padding:0.9rem;text-align:center;background:var(--blue-50);}
    .matching-card:nth-child(2){background:#ecfdf5;}
    .matching-card:nth-child(3){background:#f5f3ff;}
    .matching-num{font-size:1.2rem;font-weight:700;color:var(--brand-700);}
    .matching-label{font-size:0.8rem;color:var(--gray-500);}
    .matching-hint{margin-top:1.2rem;text-align:center;font-size:0.85rem;color:var(--gray-500);}
    @media(min-width:768px){.matching-stats{grid-template-columns:repeat(3,minmax(0,1fr));}}

    /* Loading in step 4 */
    .matching-loading{text-align:center;padding:1.5rem 0 0.5rem;color:var(--gray-600);font-size:0.95rem;}
    .spinner{
      width:40px;height:40px;border-radius:999px;border:4px solid var(--blue-100);
      border-top-color:var(--brand-600);margin:0.5rem auto 0.75rem;animation:spin 1s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg);}}

    /* Footer / nav */
    .nav-row{
      display:flex;justify-content:space-between;align-items:center;gap:0.75rem;
      margin-top:1.8rem;padding-top:1.2rem;border-top:1px solid var(--gray-100);
    }
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:0.35rem;
      border-radius:999px;padding:0.6rem 1.4rem;border:1px solid transparent;
      font-size:0.9rem;font-weight:500;cursor:pointer;background:#fff;color:#111827;
    }
    .btn-outline{border-color:var(--gray-300);background:#fff;}
    .btn-primary{
      background:linear-gradient(135deg,var(--brand-600),var(--brand-700));
      color:#fff;
      box-shadow:0 12px 30px rgba(0,80,179,0.28);
    }
    .btn-primary:disabled{opacity:0.5;cursor:not-allowed;box-shadow:none;}
    .btn-outline:disabled{opacity:0.5;cursor:not-allowed;}

    .error{color:var(--gray-500);font-size:0.8rem;margin-top:0.15rem;}
    .hint{font-size:0.85rem;color:var(--gray-500);}

    .success-message{text-align:center;padding:2.4rem 1rem 2.6rem;}
    .success-message h2{font-size:1.5rem;margin-bottom:0.75rem;}
    .success-circle{
      width:80px;height:80px;border-radius:999px;
      background:radial-gradient(circle at center,#22c55e,#16a34a);
      display:flex;align-items:center;justify-content:center;
      margin:0 auto 1.2rem;
      box-shadow:0 16px 40px rgba(34,197,94,0.45);
    }
    .success-circle span{color:#fff;font-size:2rem;font-weight:700;}

    /* E-Mail-Info Popup */
    .email-pop{
      margin-top:0.55rem;
      border-radius:0.95rem;
      border:1px solid rgba(0,80,179,0.18);
      background:linear-gradient(135deg, rgba(0,80,179,0.06), rgba(0,80,179,0.02));
      padding:0.75rem 0.9rem;
      font-size:0.85rem;
      color:var(--gray-600);
      box-shadow:0 10px 26px rgba(15,23,42,0.08);
      animation:pop .14s ease-out;
    }
    @keyframes pop{
      from{transform:translateY(-4px);opacity:0;}
      to{transform:translateY(0);opacity:1;}
    }
    .email-pop strong{color:#0f172a;}
    .email-pop small{display:block;margin-top:0.25rem;color:var(--gray-500);}

    /* Honeypot (versteckt) */
    .hp{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;}
    .site-footer{margin-top:auto;padding:1rem 1.25rem 1.5rem;font-size:0.8rem;color:var(--gray-500);}
    .site-footer .container{text-align:center;}
    .site-footer a{color:inherit;text-decoration:none;margin:0 0.5rem;}
    .site-footer a:hover{text-decoration:underline;}
  </style>
</head>
<body>
<div class="page">
  <header class="hero">
    <div class="container">
      <div class="badge">Kostenlose &amp; unverbindliche Umzugsanfrage</div>
      <h1 class="hero-title">Umzugskosten vergleichen</h1>
      <p class="hero-subtitle">
        In wenigen Schritten kostenlos und unverbindlich Angebote von qualifizierten Umzugsunternehmen erhalten.
      </p>

      <div class="trust-row">
        <div class="trust-item"><div class="trust-dot"></div><span>Deutschlandweit</span></div>
        <div class="trust-item"><div class="trust-dot"></div><span>Qualifizierte Unternehmen</span></div>
        <div class="trust-item"><div class="trust-dot"></div><span>100% kostenlos</span></div>
      </div>
    </div>
  </header>

  <main class="card">
    <!-- Step indicator -->
    <div class="steps" id="stepIndicator">
      <div class="step-item current" data-step="1">
        <div class="step-circle"><span>1</span></div>
        <div class="step-label">Route</div>
        <div class="step-line"></div>
      </div>
      <div class="step-item" data-step="2">
        <div class="step-circle"><span>2</span></div>
        <div class="step-label">Wohnung</div>
        <div class="step-line"></div>
      </div>
      <div class="step-item" data-step="3">
        <div class="step-circle"><span>3</span></div>
        <div class="step-label">Details</div>
        <div class="step-line"></div>
      </div>
      <div class="step-item" data-step="4">
        <div class="step-circle"><span>4</span></div>
        <div class="step-label">Matching</div>
        <div class="step-line"></div>
      </div>
      <div class="step-item" data-step="5">
        <div class="step-circle"><span>5</span></div>
        <div class="step-label">Kontakt</div>
      </div>
    </div>

    <!-- STEP 1: ROUTE -->
    <div class="form-step active" data-step="1">
      <h2 class="step-title">Von wo nach wo ziehen Sie?</h2>
      <p class="step-subtitle">Geben Sie Ihre Umzugsroute an.</p>

      <div class="grid-2">
        <div class="pill-card">
          <h3 style="margin:0 0 0.7rem;font-size:0.95rem;font-weight:600;display:flex;align-items:center;gap:0.4rem;">
            <span style="width:8px;height:8px;border-radius:999px;background:var(--red-500);"></span>
            Wohnung Auszug
          </h3>
          <div style="margin-bottom:0.6rem;">
            <label for="move_from_zip">Postleitzahl<span class="req">*</span></label>
            <input id="move_from_zip" type="text" inputmode="numeric" maxlength="5" />
            <div class="error" id="err_from_zip"></div>
          </div>
          <div>
            <label for="move_from_city">Stadt (optional)</label>
            <input id="move_from_city" type="text" />
          </div>
        </div>

        <div class="pill-card">
          <h3 style="margin:0 0 0.7rem;font-size:0.95rem;font-weight:600;display:flex;align-items:center;gap:0.4rem;">
            <span style="width:8px;height:8px;border-radius:999px;background:var(--green-500);"></span>
            Wohnung Einzug
          </h3>
          <div style="margin-bottom:0.6rem;">
            <label for="move_to_zip">Postleitzahl<span class="req">*</span></label>
            <input id="move_to_zip" type="text" inputmode="numeric" maxlength="5" />
            <div class="error" id="err_to_zip"></div>
          </div>
          <div>
            <label for="move_to_city">Stadt (optional)</label>
            <input id="move_to_city" type="text" />
          </div>
        </div>
      </div>
    </div>

    <!-- STEP 2: WOHNUNG -->
    <div class="form-step" data-step="2">
      <h2 class="step-title">Details zu den Wohnungen</h2>
      <p class="step-subtitle">Diese Angaben sind freiwillig – helfen aber, den Aufwand besser einzuschätzen.</p>

      <div class="grid-2">
        <div class="pill-card">
          <h3 style="margin:0 0 0.75rem;font-size:0.95rem;font-weight:600;display:flex;align-items:center;gap:0.4rem;">
            <span style="width:8px;height:8px;border-radius:999px;background:var(--red-500);"></span>
            Wohnung Auszug
          </h3>

          <div style="margin-bottom:0.65rem;">
            <label for="living_space_from">Wohnfläche (m²)</label>
            <input id="living_space_from" type="number" inputmode="numeric" min="0" />
          </div>
          <div style="margin-bottom:0.65rem;">
            <label for="rooms_from">Anzahl Zimmer</label>
            <input id="rooms_from" type="number" inputmode="numeric" min="0" step="1" />
          </div>
          <div style="margin-bottom:0.8rem;">
            <label for="floor_from">Etage</label>
            <select id="floor_from">
              <option value="">Bitte wählen</option>
              <option value="-1">-1</option>
              <option value="0">EG</option>
              <option value="1">1. OG</option>
              <option value="2">2. OG</option>
              <option value="3">3. OG</option>
              <option value="4">4. OG</option>
              <option value="5">5. OG</option>
              <option value="6">6. OG</option>
              <option value="7">7. OG</option>
              <option value="8">8. OG</option>
              <option value="9">9. OG</option>
              <option value="10">10. OG</option>
              <option value="egal">Egal</option>
            </select>
          </div>

          <!-- linksbündig -->
          <div style="display:flex;align-items:center;gap:0.55rem;justify-content:flex-start;">
            <input type="checkbox" id="has_elevator_from" />
            <label for="has_elevator_from" style="margin:0;font-size:0.88rem;cursor:pointer;color:var(--gray-700);">Aufzug vorhanden</label>
          </div>
        </div>

        <div class="pill-card">
          <h3 style="margin:0 0 0.75rem;font-size:0.95rem;font-weight:600;display:flex;align-items:center;gap:0.4rem;">
            <span style="width:8px;height:8px;border-radius:999px;background:var(--green-500);"></span>
            Wohnung Einzug
          </h3>

          <div style="margin-bottom:0.65rem;">
            <label for="living_space_to">Wohnfläche (m²)</label>
            <input id="living_space_to" type="number" inputmode="numeric" min="0" />
          </div>
          <div style="margin-bottom:0.65rem;">
            <label for="rooms_to">Anzahl Zimmer</label>
            <input id="rooms_to" type="number" inputmode="numeric" min="0" step="1" />
          </div>
          <div style="margin-bottom:0.8rem;">
            <label for="floor_to">Etage</label>
            <select id="floor_to">
              <option value="">Bitte wählen</option>
              <option value="-1">-1</option>
              <option value="0">EG</option>
              <option value="1">1. OG</option>
              <option value="2">2. OG</option>
              <option value="3">3. OG</option>
              <option value="4">4. OG</option>
              <option value="5">5. OG</option>
              <option value="6">6. OG</option>
              <option value="7">7. OG</option>
              <option value="8">8. OG</option>
              <option value="9">9. OG</option>
              <option value="10">10. OG</option>
              <option value="egal">Egal</option>
            </select>
          </div>

          <!-- linksbündig -->
          <div style="display:flex;align-items:center;gap:0.55rem;justify-content:flex-start;">
            <input type="checkbox" id="has_elevator_to" />
            <label for="has_elevator_to" style="margin:0;font-size:0.88rem;cursor:pointer;color:var(--gray-700);">Aufzug vorhanden</label>
          </div>
        </div>
      </div>
    </div>

    <!-- STEP 3: ART DES UMZUGS -->
    <div class="form-step" data-step="3">
      <h2 class="step-title">Art des Umzugs</h2>
      <p class="step-subtitle">Damit wir passende Angebote finden können.</p>

      <div style="margin-bottom:1.1rem;font-size:0.9rem;font-weight:600;">Privat oder geschäftlich?</div>
      <div class="choice-grid choice-grid-2">
        <div class="choice-card" data-choice-group="move_type" data-choice-value="privat">
          <div class="choice-title">Privatumzug</div>
          <div class="choice-sub">Wohnungswechsel, Hausumzug</div>
        </div>
        <div class="choice-card" data-choice-group="move_type" data-choice-value="geschaeft">
          <div class="choice-title">Geschäftsumzug</div>
          <div class="choice-sub">Büroumzug, Firmensitz</div>
        </div>
      </div>

      <div style="margin:1.1rem 0 0.9rem;font-size:0.9rem;font-weight:600;">Geht der Umzug ins Ausland?</div>
      <div class="choice-grid choice-grid-2">
        <div class="choice-card" data-choice-group="is_international" data-choice-value="false">
          <div class="choice-title">Innerhalb Deutschlands</div>
          <div class="choice-sub">Lokaler oder nationaler Umzug</div>
        </div>
        <div class="choice-card" data-choice-group="is_international" data-choice-value="true">
          <div class="choice-title">Ins Ausland</div>
          <div class="choice-sub">Internationaler Umzug</div>
        </div>
      </div>

      <div style="margin:1.1rem 0 0.9rem;font-size:0.9rem;font-weight:600;">Umfang des Umzugs</div>
      <div class="choice-grid choice-grid-3">
        <div class="choice-card" data-choice-group="move_scope" data-choice-value="ganzer_haushalt">
          <div class="choice-title">Ganzer Haushalt</div>
          <div class="choice-sub">Komplette Wohnung / Haus</div>
        </div>
        <div class="choice-card" data-choice-group="move_scope" data-choice-value="halber_haushalt">
          <div class="choice-title">Halber Haushalt</div>
          <div class="choice-sub">Teilweise Möbel &amp; Kartons</div>
        </div>
        <div class="choice-card" data-choice-group="move_scope" data-choice-value="teilumzug">
          <div class="choice-title">Nur Kartons</div>
          <div class="choice-sub">Wenige Gegenstände</div>
        </div>
      </div>

      <div style="margin-top:1.2rem;">
        <label for="move_notes">Optionale Infos zum Umzug (optional)</label>
        <textarea id="move_notes" placeholder="z.B. empfindliche Möbel, Halteverbotszone, gewünschte Zusatzleistungen …"></textarea>
      </div>

      <div class="error" id="err_step3" style="margin-top:0.4rem;"></div>
    </div>

    <!-- STEP 4: MATCHING -->
    <div class="form-step" data-step="4">
      <div id="matchingLoading" class="matching-loading">
        <div class="spinner"></div>
        <div>Wir suchen passende Umzugsunternehmen in Ihrer Nähe …</div>
      </div>

      <div id="matchingResult" style="display:none;">
        <h2 class="step-title">Unternehmen in Ihrer Nähe gefunden!</h2>
        <p class="step-subtitle">Wir haben passende Umzugsunternehmen in Ihrer Region gefunden.</p>

        <div class="matching-circle"><span>✓</span></div>

        <div class="matching-stats">
          <div class="matching-card">
            <div class="matching-num">bis zu 5</div>
            <div class="matching-label">Umzugsfirmen</div>
          </div>
          <div class="matching-card">
            <div class="matching-num">100&nbsp;%</div>
            <div class="matching-label">Geprüft</div>
          </div>
          <div class="matching-card">
            <div class="matching-num">24h</div>
            <div class="matching-label">Antwort</div>
          </div>
        </div>

        <div class="matching-hint">
          Fast geschafft! Nur noch Ihre Kontaktdaten, damit die passenden Unternehmen Sie erreichen können.
        </div>
      </div>
    </div>

    <!-- STEP 5: KONTAKT -->
    <div class="form-step" data-step="5">
      <h2 class="step-title">Ihre Kontaktdaten &amp; Umzugstermin</h2>
      <p class="step-subtitle">Damit die Umzugsfirmen Ihnen passende Angebote zusenden können.</p>

      <div class="grid-2">
        <div>
          <div style="margin-bottom:0.6rem;">
            <label for="customer_name">Ihr Name<span class="req">*</span></label>
            <input id="customer_name" type="text" />
            <div class="error" id="err_name"></div>
          </div>

          <div style="margin-bottom:0.6rem;">
            <label for="phone">Telefon<span class="req">*</span></label>
            <!-- Kein Beispiel/Placeholder -->
            <input id="phone" type="tel" inputmode="tel" autocomplete="tel" />
            <div class="error" id="err_phone"></div>
            <div class="hint" style="margin-top:0.35rem;">
              Erlaubt: Zahlen, Leerzeichen, „+49“ (z.B. +49 170 …).
            </div>
          </div>

          <div style="margin-bottom:0.6rem; position:relative;">
            <label for="email">E-Mail<span class="req">*</span></label>
            <input id="email" type="email" autocomplete="email" />
            <div class="error" id="err_email"></div>

            <!-- professionelles Info-Fenster (poppt auf, sobald Email gültig aussieht) -->
            <div id="emailInfo" class="email-pop" style="display:none;">
              <strong>Wichtig:</strong> Bitte bestätigen Sie nach dem Absenden Ihre E-Mail-Adresse.
              <small>Erst danach wird Ihre Anfrage an passende Umzugsunternehmen weitergegeben.</small>
            </div>
          </div>

          <!-- Honeypot -->
          <div class="hp" aria-hidden="true">
            <label for="company_website">Website</label>
            <input id="company_website" type="text" tabindex="-1" autocomplete="off" />
          </div>
        </div>

        <div>
          <div style="margin-bottom:0.6rem;">
            <label for="move_date_type">Umzugstermin<span class="req">*</span></label>
            <select id="move_date_type">
              <option value="fest">Festes Datum</option>
              <option value="zeitraum">Zeitraum</option>
            </select>
          </div>

          <div id="date_fixed">
            <label for="move_date">Datum<span class="req">*</span></label>
            <input id="move_date" type="date" />
          </div>

          <div id="date_range" style="display:none;">
            <div style="margin-bottom:0.5rem;">
              <label for="move_date_from">Von<span class="req">*</span></label>
              <input id="move_date_from" type="date" />
            </div>
            <div>
              <label for="move_date_to">Bis<span class="req">*</span></label>
              <input id="move_date_to" type="date" />
            </div>
          </div>

          <div class="error" id="err_date" style="margin-top:0.35rem;"></div>
        </div>
      </div>

      <p class="hint" style="margin-top:0.85rem;">
        Mit dem Absenden stimmen Sie zu, dass ausgewählte Umzugsunternehmen Sie telefonisch oder per E-Mail zur Angebotserstellung kontaktieren dürfen.
      </p>
    </div>

    <!-- STEP 6: FERTIG / DANKESSEITE -->
    <div class="form-step" data-step="6">
      <div class="success-message">
        <div class="success-circle"><span>✓</span></div>
        <h2>Vielen Dank für Ihre Anfrage!</h2>
        <p class="hint">
          Ihre Anfrage ist eingegangen. Bitte bestätigen Sie jetzt Ihre E-Mail – danach erhalten Sie in der Regel innerhalb von 24&nbsp;Stunden erste Angebote.
        </p>
        <p class="hint" style="margin-top:0.75rem;">
          Datenschutz: Ihre Daten werden ausschließlich zur Vermittlung von Umzugsangeboten verwendet.
        </p>
      </div>
    </div>

    <!-- Nav row -->
    <div class="nav-row" id="navRow">
      <button class="btn btn-outline" id="btnBack">Zurück</button>
      <button class="btn btn-primary" id="btnNext">Weiter</button>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <a href="impressum.html">Impressum</a> ·
      <a href="datenschutz.html">Datenschutz</a>
    </div>
  </footer>
</div>

<script>
  const TOTAL_STEPS = 5; // letzter Formular-Schritt, 6 = Danke
  let currentStep = 1;
  const formData = {};
  let todayStr = null;

  const stepEls = document.querySelectorAll(".form-step");
  const indicatorItems = document.querySelectorAll("#stepIndicator .step-item");
  const btnBack = document.getElementById("btnBack");
  const btnNext = document.getElementById("btnNext");
  const navRow = document.getElementById("navRow");

  const loadingBox = document.getElementById("matchingLoading");
  const resultBox = document.getElementById("matchingResult");

  // Email-Info Popup
  const emailInput = document.getElementById("email");
  const emailInfo = document.getElementById("emailInfo");

  function initDatesMin() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    todayStr = today.toISOString().split("T")[0];
    ["move_date", "move_date_from", "move_date_to"].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.min = todayStr;
    });
  }

  function showStep(step) {
    currentStep = step;

    stepEls.forEach(el => {
      el.classList.toggle("active", Number(el.dataset.step) === step);
    });

    indicatorItems.forEach(item => {
      const s = Number(item.dataset.step);
      item.classList.toggle("current", s === step);
      item.classList.toggle("completed", s < step);
    });

    btnBack.disabled = (step === 1);

    if (step === 4) {
      btnNext.style.display = "none";
      runMatchingAnimation();
    } else {
      btnNext.style.display = "inline-flex";
    }

    navRow.style.display = (step === 6) ? "none" : "flex";
    btnNext.textContent = (step === 5) ? "Angebote erhalten" : "Weiter";

    validateStep();
  }

  function collectData() {
    // Step 1
    formData.move_from_zip = (document.getElementById("move_from_zip").value || "").trim();
    formData.move_from_city = (document.getElementById("move_from_city").value || "").trim();
    formData.move_to_zip   = (document.getElementById("move_to_zip").value || "").trim();
    formData.move_to_city  = (document.getElementById("move_to_city").value || "").trim();

    // Step 2
    formData.living_space_from = document.getElementById("living_space_from").value;
    formData.rooms_from        = document.getElementById("rooms_from").value;
    formData.floor_from        = document.getElementById("floor_from").value;
    formData.has_elevator_from = document.getElementById("has_elevator_from").checked;

    formData.living_space_to = document.getElementById("living_space_to").value;
    formData.rooms_to        = document.getElementById("rooms_to").value;
    formData.floor_to        = document.getElementById("floor_to").value;
    formData.has_elevator_to = document.getElementById("has_elevator_to").checked;

    const notesEl = document.getElementById("move_notes");
    formData.move_notes = notesEl ? notesEl.value.trim() : "";

    // Step 5
    formData.customer_name   = (document.getElementById("customer_name").value || "").trim();
    formData.phone           = (document.getElementById("phone").value || "").trim();
    formData.email           = (document.getElementById("email").value || "").trim();
    formData.move_date_type  = document.getElementById("move_date_type").value;
    formData.move_date       = document.getElementById("move_date").value;
    formData.move_date_from  = document.getElementById("move_date_from").value;
    formData.move_date_to    = document.getElementById("move_date_to").value;

    // Honeypot
    const hp = document.getElementById("company_website");
    formData.company_website = hp ? (hp.value || "").trim() : "";
  }

  function clearErrors() {
    document.querySelectorAll(".error").forEach(e => (e.textContent = ""));
  }

  function isValidEmailLike(value) {
    // simpel & robust fürs UI
    return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(value);
  }

  function validateStep() {
    clearErrors();
    collectData();
    let valid = true;

    if (currentStep === 1) {
      // nur Zahlen 5-stellig
      const fz = formData.move_from_zip.replace(/\D/g, "").slice(0, 5);
      const tz = formData.move_to_zip.replace(/\D/g, "").slice(0, 5);
      if (!fz) { const el = document.getElementById("err_from_zip"); if (el) el.textContent = "Bitte Postleitzahl eingeben."; valid = false; }
      if (!tz) { const el = document.getElementById("err_to_zip"); if (el) el.textContent = "Bitte Postleitzahl eingeben."; valid = false; }
    }

    if (currentStep === 3) {
      if (!formData.move_type || typeof formData.is_international === "undefined" || !formData.move_scope) {
        const el = document.getElementById("err_step3");
        if (el) el.textContent = "Bitte wählen Sie jeweils eine Option aus allen Bereichen.";
        valid = false;
      }
    }

    if (currentStep === 5) {
      if (!formData.customer_name) { const el = document.getElementById("err_name"); if (el) el.textContent = "Bitte Namen eingeben."; valid = false; }
      if (!formData.phone) { const el = document.getElementById("err_phone"); if (el) el.textContent = "Bitte Telefonnummer eingeben."; valid = false; }
      if (!formData.email) { const el = document.getElementById("err_email"); if (el) el.textContent = "Bitte E-Mail eingeben."; valid = false; }

      let hasDate = false;
      if (formData.move_date_type === "fest") {
        hasDate = !!formData.move_date;
      } else {
        hasDate = !!formData.move_date_from && !!formData.move_date_to && formData.move_date_from <= formData.move_date_to;
      }
      if (!hasDate) { const el = document.getElementById("err_date"); if (el) el.textContent = "Bitte gültigen Umzugstermin angeben."; valid = false; }
    }

    if (currentStep !== 4) btnNext.disabled = !valid;
    return valid;
  }

  // Choice Cards (Step 3)
  document.querySelectorAll(".choice-card").forEach(card => {
    card.addEventListener("click", () => {
      const group = card.dataset.choiceGroup;
      const value = card.dataset.choiceValue;

      document.querySelectorAll(`.choice-card[data-choice-group="${group}"]`).forEach(c => c.classList.remove("selected"));
      card.classList.add("selected");

      if (group === "is_international") {
        formData.is_international = (value === "true");
      } else {
        formData[group] = value;
      }

      validateStep();
    });
  });

  // Datumswechsel (Step 5)
  const dateTypeSelect = document.getElementById("move_date_type");
  const dateFixed = document.getElementById("date_fixed");
  const dateRange = document.getElementById("date_range");

  dateTypeSelect.addEventListener("change", () => {
    if (dateTypeSelect.value === "fest") {
      dateFixed.style.display = "block";
      dateRange.style.display = "none";
    } else {
      dateFixed.style.display = "none";
      dateRange.style.display = "block";
    }
    validateStep();
  });

  // Live-Validierung
  document.querySelectorAll("input,select,textarea").forEach(el => {
    el.addEventListener("input", () => {
      if (currentStep === 1 || currentStep === 5) validateStep();
    });
  });

  // PLZ nur Zahlen, max 5
  ["move_from_zip","move_to_zip"].forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    el.addEventListener("input", () => {
      el.value = el.value.replace(/\D/g, "").slice(0, 5);
      if (currentStep === 1) validateStep();
    });
  });

  // Telefon: erlaubt + und Zahlen, sonst raus; max Länge sinnvoll
  const phoneInput = document.getElementById("phone");
  phoneInput.addEventListener("input", () => {
    let v = phoneInput.value;

    // nur + (einmal am Anfang) und Zahlen + Leerzeichen zulassen
    v = v.replace(/[^\d+\s]/g, "");

    // wenn + vorkommt, dann nur am Anfang erlauben
    const plusIndex = v.indexOf("+");
    if (plusIndex > 0) v = v.replace(/\+/g, ""); // plus entfernen, weil nicht am Anfang
    if (plusIndex === 0) {
      // mehrere + am Anfang verhindern
      v = "+" + v.slice(1).replace(/\+/g, "");
    } else {
      v = v.replace(/\+/g, "");
    }

    // viele Leerzeichen auf eins reduzieren
    v = v.replace(/\s+/g, " ").trim();

    // max Zeichen (inkl. + und Leerzeichen) – wirkt „professionell“, verhindert Spam
    if (v.length > 18) v = v.slice(0, 18);

    phoneInput.value = v;

    if (currentStep === 5) validateStep();
  });

  // E-Mail: Popup professionell anzeigen, sobald Email gültig wirkt
  emailInput.addEventListener("input", () => {
    const v = (emailInput.value || "").trim();
    if (isValidEmailLike(v)) {
      emailInfo.style.display = "block";
    } else {
      emailInfo.style.display = "none";
    }
    if (currentStep === 5) validateStep();
  });

  // Zurück
  btnBack.addEventListener("click", () => {
    if (currentStep > 1) showStep(currentStep - 1);
  });

  // Weiter / Senden (GitHub-Version: noch ohne Backend-Call)
  btnNext.addEventListener("click", () => {
    if (!validateStep()) return;

    if (currentStep < TOTAL_STEPS) {
      showStep(currentStep + 1);
      return;
    }

    collectData();

    // Honeypot: wenn ausgefüllt -> einfach “tun als ob”
    if (formData.company_website) {
      document.querySelector("main.card").scrollIntoView({ behavior: "smooth" });
      showStep(6);
      return;
    }

    // Hier später der echte API-Call rein, sobald Backend live ist.
    // (UI ist bereits auf E-Mail-Bestätigung vorbereitet.)
    console.log("Formulardaten:", formData);

    document.querySelector("main.card").scrollIntoView({ behavior: "smooth" });
    showStep(6);
  });

  function runMatchingAnimation() {
    if (!loadingBox || !resultBox) return;

    loadingBox.style.display = "block";
    resultBox.style.display = "none";

    setTimeout(() => {
      loadingBox.style.display = "none";
      resultBox.style.display = "block";
    }, 2000);

    setTimeout(() => {
      if (currentStep === 4) showStep(5);
    }, 4000);
  }

  initDatesMin();
  validateStep();
</script>
</body>
</html>
